/* Flex layout utilities */
.flex {
  display: flex;
}

.flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

.flex-v-center {
  display: flex;
  align-items: center;
}

.flex-h-center {
  display: flex;
  justify-content: center;
}

.flex-between {
  display: flex;
  justify-content: space-between;
}

.flex-column {
  display: flex;
  flex-direction: column;
}

.flex-1 {
  flex: 1;
}

/* Card/Panel common styles - macOS style */
.card {
  background-color: var(--color-bg-elevated);
  border: 0.5px solid var(--color-border-secondary);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-base);
}

.card:hover {
  box-shadow: var(--shadow-md);
}

.card-lg {
  background-color: var(--color-bg-elevated);
  border: 0.5px solid var(--color-border-secondary);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-md);
  transition: all var(--transition-base);
}

.card-lg:hover {
  box-shadow: var(--shadow-lg);
}

.panel {
  background-color: var(--color-bg-secondary);
  /* Remove physical border and use 0.5px spread shadow to completely eliminate gaps */
  border: none !important;
  box-shadow: 
    0 0 0 0.5px var(--color-border-secondary), 
    var(--shadow-xl);
  border-radius: var(--radius-2xl);
  backdrop-filter: var(--blur-medium);
  transition: all var(--transition-base);
  /* Basic overflow hidden */
  overflow: hidden;
  /* Shadow simulation mode doesn't need clip-path, avoiding cutting off simulated border lines */
  clip-path: none !important;
  background-clip: padding-box;
  isolation: isolate;
  transform: translateZ(0); 
}

/* Button base styles - macOS style */
.btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px 14px; /* Adjusted padding to achieve 34px total height */
  height: 34px; /* Set fixed height to 34px */
  border: none;
  border-radius: var(--radius-md);
  background-color: transparent;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  transition: all var(--transition-base);
  outline: none;
  user-select: none;
  box-sizing: border-box; /* Include padding in height calculation */
}

.btn:hover {
  background-color: var(--color-interactive-hover);
  color: var(--color-text-primary);
}

.btn-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 6px; /* Adjusted padding to achieve 34px total height */
  height: 34px; /* Set fixed height to 34px */
  width: 34px; /* Set fixed width to 34px for square shape */
  border: none;
  border-radius: var(--radius-md);
  background-color: transparent;
  color: var(--color-text-secondary);
  cursor: pointer;
  transition: all var(--transition-base);
  outline: none;
  box-sizing: border-box; /* Include padding in height calculation */
}

.btn-icon:hover {
  background-color: var(--color-interactive-hover);
  color: var(--color-text-primary);
}

.btn-primary {
  background-color: var(--color-primary);
  color: #ffffff;
}

.btn-primary:hover {
  background-color: var(--color-primary-hover);
  color: #ffffff;
}

/* Input field common styles - macOS style */
.input {
  padding: 6px 12px; /* Adjusted padding to achieve 34px total height */
  height: 34px; /* Set fixed height to 34px */
  border: 0.5px solid var(--color-border-secondary);
  border-radius: var(--radius-md);
  background-color: var(--color-bg-elevated);
  color: var(--color-text-primary);
  font-size: 13px;
  outline: none;
  transition: all var(--transition-base);
  box-sizing: border-box; /* Include padding in height calculation */
}

.input:hover {
  border-color: var(--color-border-primary);
  background-color: var(--color-bg-elevated);
}

.input:focus {
  border-color: var(--color-primary);
  box-shadow: var(--focus-ring);
}

.input::placeholder {
  color: var(--color-text-placeholder);
}

/* Border styles */
.border-top {
  border-top: 0.5px solid var(--color-border-secondary);
}

.border-bottom {
  border-bottom: 0.5px solid var(--color-border-secondary);
}

.border-left {
  border-left: 0.5px solid var(--color-border-secondary);
}

.border-right {
  border-right: 0.5px solid var(--color-border-secondary);
}

.border-all {
  border: 0.5px solid var(--color-border-secondary);
}

/* Glass effect */
.glass-light {
  backdrop-filter: var(--blur-light);
}

.glass-medium {
  backdrop-filter: var(--blur-medium);
}

.glass-heavy {
  backdrop-filter: var(--blur-heavy);
}

/* Interactive element states - macOS style */
.interactive {
  cursor: pointer;
  transition: all var(--transition-base);
  user-select: none;
}

.interactive:hover {
  background-color: var(--color-interactive-hover);
}

.interactive:active {
  background-color: var(--color-interactive-active);
}

/* Text styles */
.text-primary {
  color: var(--color-text-primary);
}

.text-secondary {
  color: var(--color-text-secondary);
}

.text-tertiary {
  color: var(--color-text-tertiary);
}

.text-placeholder {
  color: var(--color-text-placeholder);
}

/* Size utilities */
.w-full {
  width: 100%;
}

.h-full {
  height: 100%;
}

/* Overflow handling */
.overflow-hidden {
  overflow: hidden;
}

.overflow-auto {
  overflow: auto;
}

.text-ellipsis {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Spacing utilities */
.gap-xs {
  gap: 4px;
}

.gap-sm {
  gap: 6px;
}

.gap-md {
  gap: 8px;
}

.gap-lg {
  gap: 12px;
}

.gap-xl {
  gap: 16px;
}

/* Opacity */
.opacity-50 {
  opacity: 0.5;
}

.opacity-60 {
  opacity: 0.6;
}

.opacity-80 {
  opacity: 0.8;
}

/* Scrollbar style optimization */
.scrollbar-thin::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.scrollbar-thin::-webkit-scrollbar-track {
  background-color: transparent;
}

.scrollbar-thin::-webkit-scrollbar-thumb {
  background-color: var(--color-border-primary);
  border-radius: var(--radius-xs);
}

.scrollbar-thin::-webkit-scrollbar-thumb:hover {
  background-color: var(--color-text-tertiary);
}

.scrollbar-hidden {
  scrollbar-width: none;
}

.scrollbar-hidden::-webkit-scrollbar {
  display: none;
}

/* Animation utilities */
.animate-fade-in {
  animation: fadeIn var(--transition-base);
}

.animate-slide-up {
  animation: slideUp var(--transition-base);
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    opacity: 0;
    transform: translateY(8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Disabled state */
.disabled {
  opacity: 0.5;
  cursor: not-allowed;
  pointer-events: none;
}

/* Tauri drag region - DISABLED */
/* .draggable {
  -webkit-app-region: drag;
} */

.no-drag {
  -webkit-app-region: no-drag;
}

/* 
 * Common modal design system
 * Based on desktop application modal design philosophy
 */

/* 
 * üõ†Ô∏è NexaShell Standard Modal System
 * Usage:
 * <div class="modal-system-overlay">
 *   <div class="modal-system-panel"> Content </div>
 * </div>
 */

.modal-system-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  backdrop-filter: blur(4px) saturate(150%);
  background-color: var(--color-bg-overlay);
  /* CRITICAL: Inherit main container radius to prevent corner gaps */
  border-radius: inherit;
  overflow: hidden;
  animation: modal-overlay-fade 0.2s ease-out;
}

.modal-system-panel {
  position: relative;
  background-color: var(--color-bg-secondary);
  border-radius: var(--radius-2xl);
  /* Use spread shadow to simulate border, completely solving the corner gap issue */
  border: none !important;
  box-shadow: 
    0 0 0 0.5px var(--color-border-primary),
    var(--shadow-2xl);
  /* Force hardware acceleration to eliminate rendering artifacts */
  transform: translateZ(0);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  animation: modal-panel-appear 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes modal-overlay-fade {
  from { opacity: 0; backdrop-filter: blur(0); }
  to { opacity: 1; backdrop-filter: blur(4px) saturate(150%); }
}

@keyframes modal-panel-appear {
  from { opacity: 0; transform: scale(0.95) translateY(10px); }
  to { opacity: 1; transform: scale(1) translateY(0); }
}

/* Backward compatibility for legacy code */
.modal-overlay {
  @extend .modal-system-overlay;
}
.modal-content {
  @extend .modal-system-panel;
}

/* Common modal form styles */
.modal-form {
  width: 100%;
  max-width: 480px;
  padding: 16px;
  background: var(--color-bg-secondary);
  border-radius: var(--radius-md);
  position: relative;
  border: 1px solid var(--color-border-primary);
  overflow: hidden;
}

/* Modal header - supports macOS and Windows style close buttons */
.modal-header {
  display: grid;
  grid-template-columns: 24px 1fr 24px;
  align-items: center;
  margin-bottom: 16px;
  gap: 8px;
  padding: 8px 12px 12px;
  border-bottom: 1px solid var(--color-border-secondary);
  background: var(--color-bg-tertiary);
  border-radius: var(--radius-sm) var(--radius-sm) 0 0;
  margin: -16px -16px 16px -16px;
}

.modal-header-left,
.modal-header-right {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-title {
  margin: 0;
  color: var(--color-text-primary);
  font-size: 1.1em;
  font-weight: 600;
  text-align: center;
}

/* Close button styles - macOS style */
.modal-close-btn {
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  margin: 0;
  transition: var(--transition-fast);
  flex-shrink: 0;
}

.modal-macos-close {
  background: #ff5f57;
  width: 12px;
  height: 12px;
  border-radius: 50%;
}

.modal-macos-close .close-icon {
  color: transparent;
  font-size: 0;
  width: 12px;
  height: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* Close button styles - Windows style */
.modal-windows-close {
  background: transparent;
  width: 24px;
  height: 24px;
  border-radius: var(--radius-sm);
  font-size: 16px;
}

.modal-windows-close .close-icon {
  color: var(--color-text-secondary);
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 1;
}

.modal-close-btn:hover {
  opacity: 0.8;
}

.modal-windows-close:hover {
  background: var(--color-interactive-hover);
}

/* Form row layout */
.modal-form-row {
  display: flex;
  gap: 12px;
  margin-bottom: 12px;
}

/* Form group */
.modal-form-group {
  flex: 1;
  display: flex;
  flex-direction: column;
  min-width: 0;
}

.modal-form-group.full-width {
  flex: 1 0 100%;
}

.modal-form-group label {
  display: block;
  margin-bottom: 4px;
  color: var(--color-text-primary);
  font-size: 0.9em;
  font-weight: 500;
}

/* Input field styles */
.modal-input {
  width: 100%;
  padding: 6px 8px; /* Adjusted padding to achieve 34px total height */
  height: 34px; /* Set fixed height to 34px */
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-sm);
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  font-size: 0.9em;
  box-sizing: border-box; /* Include padding in height calculation */
}

.modal-input.error {
  border-color: #ff4757;
}

.modal-input:focus {
  outline: none;
  border-color: var(--color-primary);
}

/* Error message */
.modal-error-message {
  display: block;
  color: #ff4757;
  font-size: 0.75em;
  margin-top: 2px;
  margin-bottom: 4px;
}

/* Form action buttons */
.modal-form-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid var(--color-border-secondary);
}

.modal-btn {
  padding: 6px 12px; /* Adjusted padding to achieve 34px total height */
  height: 34px; /* Set fixed height to 34px */
  border: none;
  border-radius: var(--radius-sm);
  cursor: pointer;
  font-size: 0.9em;
  transition: var(--transition-fast);
  box-sizing: border-box; /* Include padding in height calculation */
}

.modal-btn-primary {
  background: var(--color-primary);
  color: white;
}

.modal-btn-primary:hover {
  background: var(--color-primary-hover);
}

.modal-btn-secondary {
  background: var(--color-bg-tertiary);
  color: var(--color-text-primary);
}

.modal-btn-secondary:hover {
  background: var(--color-interactive-hover);
}

/* Password input container */
.modal-password-input-container {
  position: relative;
  display: flex;
  align-items: center;
}

.modal-password-input-container input {
  width: 100%;
  padding: 6px 30px 6px 8px; /* Space reserved for eye icon */
  height: 34px; /* Set fixed height to 34px */
  border: 1px solid var(--color-border-primary);
  border-radius: var(--radius-sm);
  background: var(--color-bg-primary);
  color: var(--color-text-primary);
  font-size: 0.9em;
  box-sizing: border-box; /* Include padding in height calculation */
}

.modal-password-toggle-btn {
  position: absolute;
  right: 8px;
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-tertiary);
  border-radius: var(--radius-sm);
}

.modal-password-toggle-btn:hover {
  background: var(--color-interactive-hover);
  color: var(--color-text-secondary);
}

/* IP suggestion dropdown */
.modal-ip-input-container {
  position: relative;
}

.modal-ip-input-container input {
  padding: 6px 8px; /* Adjusted padding to achieve 34px total height */
  height: 34px; /* Set fixed height to 34px */
  box-sizing: border-box; /* Include padding in height calculation */
}

.modal-ip-suggestions {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  background: var(--color-bg-primary);
  border: 1px solid var(--color-border-primary);
  border-top: none;
  border-radius: 0 0 var(--radius-sm) var(--radius-sm);
  max-height: 150px;
  overflow-y: auto;
  z-index: 10;
  box-shadow: var(--shadow-sm);
}

.modal-ip-suggestion-item {
  padding: 8px;
  cursor: pointer;
  color: var(--color-text-primary);
  font-size: 0.9em;
  border-bottom: 1px solid var(--color-border-secondary);
}

.modal-ip-suggestion-item:hover {
  background: var(--color-interactive-hover);
}

.modal-ip-suggestion-item:last-child {
  border-bottom: none;
}
